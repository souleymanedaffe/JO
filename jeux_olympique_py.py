# -*- coding: utf-8 -*-
"""jeux_olympique.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1EUlkID3IBeBIo1kJQN7qRfBbyrWOwKWL
"""

from openai import OpenAI
import streamlit as st


st.title("Chatbot Souleymane pour JO 2024")

JO_PROMPT = """Pour toute question relative au classement des Jeux olympiques de Paris 2024, voici les informations officielles :

Les Jeux olympiques de Paris 2024 ont vu les √âtats-Unis dominer le tableau des m√©dailles, avec un total de 126 m√©dailles, dont 40 en or, 44 en argent et 42 en bronze.

La Chine a √©galement obtenu 40 m√©dailles d'or, mais avec un total de 91 m√©dailles (27 en argent et 24 en bronze), se classant ainsi deuxi√®me.

Le Japon compl√®te le podium avec 45 m√©dailles, dont 20 en or, 12 en argent et 13 en bronze.

La France, pays h√¥te, a r√©alis√© une performance remarquable en se classant cinqui√®me, avec un total de 72 m√©dailles, dont 15 en or, 25 en argent et 32 en bronze.

Voici La liste des m√©dailles par Nations aux Jeux olympiques de Paris 2024 :

Voici le classement complet des pays par nombre de m√©dailles obtenues lors des Jeux olympiques de Paris 2024 :

Voici le tableau transform√© √† partir des donn√©es fournies :

| Rang | Pays/R√©gion                              | Or | Argent | Bronze | Total |
|------|------------------------------------------|----|--------|--------|-------|
| 1    | Etats-Unis                               | 40 | 44     | 42     | 126   |
| 2    | Chine                                    | 40 | 27     | 24     | 91    |
| 3    | Japon                                    | 20 | 12     | 13     | 45    |
| 4    | Australie                                | 18 | 19     | 16     | 53    |
| 5    | France                                   | 16 | 26     | 22     | 64    |
| 6    | Pays-Bas                                 | 15 | 7      | 12     | 34    |
| 7    | Grande-Bretagne                          | 14 | 22     | 29     | 65    |
| 8    | Cor√©e du Sud                             | 13 | 9      | 10     | 32    |
| 9    | Italie                                   | 12 | 13     | 15     | 40    |
| 10   | Allemagne                                | 12 | 13     | 8      | 33    |
| 11   | Nouvelle-Z√©lande                         | 10 | 7      | 3      | 20    |
| 12   | Canada                                   | 9  | 7      | 11     | 27    |
| 13   | Ouzb√©kistan                              | 8  | 2      | 3      | 13    |
| 14   | Hongrie                                  | 6  | 7      | 6      | 19    |
| 15   | Espagne                                  | 5  | 4      | 9      | 18    |
| 16   | Su√®de                                    | 4  | 4      | 3      | 11    |
| 17   | Kenya                                    | 4  | 2      | 5      | 11    |
| 18   | Norv√®ge                                  | 4  | 1      | 3      | 8     |
| 19   | Irlande                                  | 4  | 0      | 3      | 7     |
| 20   | Br√©sil                                   | 3  | 7      | 10     | 20    |
| 21   | Iran                                     | 3  | 6      | 3      | 12    |
| 22   | Ukraine                                  | 3  | 5      | 4      | 12    |
| 23   | Roumanie                                 | 3  | 4      | 2      | 9     |
| 24   | G√©orgie                                  | 3  | 3      | 1      | 7     |
| 25   | Belgique                                 | 3  | 1      | 6      | 10    |
| 26   | Bulgarie                                 | 3  | 1      | 3      | 7     |
| 27   | Serbie                                   | 3  | 1      | 1      | 5     |
| 28   | R√©p. Tch√®que                             | 3  | 0      | 2      | 5     |
| 29   | Danemark                                 | 2  | 2      | 5      | 9     |
| 30   | Azerba√Ødjan                              | 2  | 2      | 3      | 7     |
| 31   | Croatie                                  | 2  | 2      | 3      | 7     |
| 32   | Cuba                                     | 2  | 1      | 6      | 9     |
| 33   | Bahrein                                  | 2  | 1      | 1      | 4     |
| 34   | Slov√©nie                                 | 2  | 1      | 0      | 3     |
| 35   | Taiwan                                   | 2  | 0      | 5      | 7     |
| 36   | Autriche                                 | 2  | 0      | 3      | 5     |
| 37   | Hong-Kong                                | 2  | 0      | 2      | 4     |
| 38   | Philippines                              | 2  | 0      | 2      | 4     |
| 39   | Alg√©rie                                  | 2  | 0      | 1      | 3     |
| 40   | Indon√©sie                                | 2  | 0      | 1      | 3     |
| 41   | Isra√´l                                   | 1  | 5      | 1      | 7     |
| 42   | Pologne                                  | 1  | 4      | 5      | 10    |
| 43   | Kazakhstan                               | 1  | 3      | 3      | 7     |
| 44   | Afrique du Sud                           | 1  | 3      | 2      | 6     |
| 45   | Jama√Øque                                 | 1  | 3      | 2      | 6     |
| 46   | Tha√Ølande                                | 1  | 3      | 2      | 6     |
| 47   | Ethiopie                                 | 1  | 3      | 0      | 4     |
| 48   | Suisse                                   | 1  | 2      | 5      | 8     |
| 49   | Equateur                                 | 1  | 2      | 2      | 5     |
| 50   | Portugal                                 | 1  | 2      | 1      | 4     |
| 51   | Gr√®ce                                    | 1  | 1      | 6      | 8     |
| 52   | Argentine                                | 1  | 1      | 1      | 3     |
| 53   | Egypte                                   | 1  | 1      | 1      | 3     |
| 54   | Tunisie                                  | 1  | 1      | 1      | 3     |
| 55   | Botswana                                 | 1  | 1      | 0      | 2     |
| 56   | Chili                                    | 1  | 1      | 0      | 2     |
| 57   | Ouganda                                  | 1  | 1      | 0      | 2     |
| 58   | Sainte-Lucie                             | 1  | 1      | 0      | 2     |
| 59   | R√©p. Dominicaine                         | 1  | 0      | 2      | 3     |
| 60   | Guatemala                                | 1  | 0      | 1      | 2     |
| 61   | Maroc                                    | 1  | 0      | 1      | 2     |
| 62   | Dominique                                | 1  | 0      | 0      | 1     |
| 63   | Pakistan                                 | 1  | 0      | 0      | 1     |
| 64   | Turquie                                  | 0  | 3      | 5      | 8     |
| 65   | Mexique                                  | 0  | 3      | 2      | 5     |
| 66   | Arm√©nie                                  | 0  | 3      | 1      | 4     |
| 67   | Colombie                                 | 0  | 3      | 1      | 4     |
| 68   | Cor√©e du Nord                            | 0  | 2      | 4      | 6     |
| 69   | Kirghizistan                             | 0  | 2      | 4      | 6     |
| 70   | Lituanie                                 | 0  | 2      | 2      | 4     |
| 71   | Inde                                     | 0  | 1      | 5      | 6     |
| 72   | Moldavie                                 | 0  | 1      | 3      | 4     |
| 73   | Kosovo                                   | 0  | 1      | 1      | 2     |
| 74   | Chypre                                   | 0  | 1      | 0      | 1     |
| 75   | Fidji                                    | 0  | 1      | 0      | 1     |
| 76   | Jordanie                                 | 0  | 1      | 0      | 1     |
| 77   | Mongolie                                 | 0  | 1      | 0      | 1     |
| 78   | Panama                                   | 0  | 1      | 0      | 1     |
| 79   | Tadjikistan                              | 0  | 0      | 3      | 3     |
| 80   | Albanie                                  | 0  | 0      | 2      | 2     |
| 81   | Grenade                                  | 0  | 0      | 2      | 2     |
| 82   | Malaisie                                 | 0  | 0      | 2      | 2     |
| 83   | Porto-Rico                               | 0  | 0      | 2      | 2     |
| 84   | Cap Vert                                 | 0  | 0      | 1      | 1     |
| 85   | C√¥te d'Ivoire                            | 0  | 0      | 1      | 1     |
| 86   | Equipe olympique des r√©fugi√©s            | 0  | 0      | 1      | 1     |
| 87   | P√©rou                                    | 0  | 0      | 1      | 1     |
| 88   | Qatar                                    | 0  | 0      | 1      | 1     |
| 89   | Singapour                                | 0  | 0      | 1      | 1     |
| 90   | Slovaquie                                | 0  | 0      | 1      | 1     |
| 91   | Zambie                                   | 0  | 0      | 1      | 1     |

Ce tableau r√©sume les m√©dailles d'or, d'argent et de bronze gagn√©es par chaque pays ou r√©gion, ainsi que le total des m√©dailles.
Ces r√©sultats refl√®tent la comp√©titivit√© et la diversit√© des performances sportives observ√©es lors de ces Jeux.

"""

JO_PROMPT2 = """
Les Jeux olympiques de Paris 2024 ont vu de nombreux athl√®tes se distinguer par leurs performances exceptionnelles. Voici quelques-uns des m√©daill√©s les plus remarquables :

Athl√©tisme :
	‚Ä¢	Armand Duplantis (Su√®de) a remport√© son deuxi√®me titre cons√©cutif au saut √† la perche, √©tablissant un nouveau record du monde. Ôøº
	‚Ä¢	Faith Kipyegon (Kenya) a d√©croch√© son troisi√®me titre olympique cons√©cutif sur 1 500 m. Ôøº

Gymnastique :
	‚Ä¢	Simone Biles (√âtats-Unis) a fait un retour triomphal en remportant quatre nouvelles m√©dailles, consolidant ainsi son statut de l√©gende de la gymnastique. Ôøº

Natation :
	‚Ä¢	Summer McIntosh (Canada) s‚Äôest illustr√©e en remportant plusieurs m√©dailles, confirmant son statut de prodige de la natation. Ôøº
	‚Ä¢	Katie Ledecky (√âtats-Unis) a continu√© √† dominer les √©preuves de fond, ajoutant de nouvelles m√©dailles √† son palmar√®s d√©j√† impressionnant. Ôøº

Tennis :
	‚Ä¢	Novak Djokovic (Serbie) a remport√© son premier titre olympique, compl√©tant ainsi son palmar√®s avec l‚Äôor tant convoit√©. Ôøº

Cyclisme :
	‚Ä¢	Remco Evenepoel (Belgique) s‚Äôest distingu√© en remportant l‚Äô√©preuve de contre-la-montre, confirmant son statut de l‚Äôun des meilleurs cyclistes de sa g√©n√©ration. Ôøº

Cano√´-Kayak :
	‚Ä¢	Jessica Fox (Australie) et Lisa Carrington (Nouvelle-Z√©lande) ont domin√© leurs disciplines respectives, ajoutant plusieurs m√©dailles √† leur collection. Ôøº

Boxe :
	‚Ä¢	Imane Khelif (Alg√©rie) a remport√© une m√©daille d‚Äôor, marquant l‚Äôhistoire de son pays malgr√© des controverses entourant sa participation. Ôøº

Escrime :
	‚Ä¢	Olga Kharlan (Ukraine) a fait preuve de r√©silience en remportant une m√©daille, malgr√© les d√©fis personnels et politiques auxquels elle a √©t√© confront√©e. Ôøº

Rugby √† VII :
	‚Ä¢	L‚Äô√©quipe de France masculine, men√©e par Antoine Dupont, a d√©croch√© la m√©daille d‚Äôor, offrant une grande fiert√© au pays h√¥te. Ôøº

Ces performances ne sont qu‚Äôun aper√ßu des nombreux exploits r√©alis√©s lors des Jeux de Paris 2024, qui resteront grav√©s dans les m√©moires pour leur intensit√© et leur excellence sportive.


Les Jeux olympiques de Paris 2024 ont √©t√© particuli√®rement fructueux pour la d√©l√©gation fran√ßaise, qui a √©tabli un nouveau record avec un total de 64 m√©dailles : 16 en or, 26 en argent et 22 en bronze. Ôøº

Voici quelques-unes des performances les plus marquantes des athl√®tes fran√ßais :

Natation :
	‚Ä¢	L√©on Marchand s‚Äôest illustr√© en remportant quatre m√©dailles d‚Äôor, devenant ainsi le sportif fran√ßais le plus titr√© de ces Jeux. Ôøº

Judo :
	‚Ä¢	La discipline a √©t√© particuli√®rement prolifique, avec un total de 10 m√©dailles, √©tablissant un nouveau record pour le judo fran√ßais. Ôøº

Rugby √† 7 :
	‚Ä¢	L‚Äô√©quipe masculine, men√©e par Antoine Dupont, a d√©croch√© la m√©daille d‚Äôor, offrant une grande fiert√© au pays h√¥te. Ôøº

Cyclisme :
	‚Ä¢	Pauline Ferrand-Pr√©vot a remport√© l‚Äôor en VTT cross-country f√©minin. Ôøº
	‚Ä¢	Joris Daudet a d√©croch√© l‚Äôor en BMX racing masculin. Ôøº

Escrime :
	‚Ä¢	Manon Apithy-Brunet a obtenu l‚Äôor au sabre individuel f√©minin. Ôøº

Triathlon :
	‚Ä¢	Cassandre Beaugrand a remport√© l‚Äôor dans l‚Äô√©preuve individuelle f√©minine. Ôøº

Judo :
	‚Ä¢	Teddy Riner a ajout√© une nouvelle m√©daille d‚Äôor √† son palmar√®s en +100 kg masculin. Ôøº

Ces performances t√©moignent de la diversit√© et de la qualit√© des athl√®tes fran√ßais, qui ont su briller dans de nombreuses disciplines lors de ces Jeux olympiques historiques.

Pour une liste compl√®te des m√©daill√©s fran√ßais, vous pouvez consulter la source suivante : Ôøº


"""

JO_PROMPT3 = (
    "Tu es un assistant expert en sports et Jeux Olympiques. "
    "Ta t√¢che est d‚Äôanalyser les chances de m√©dailles d‚Äôun pays ou d‚Äôun athl√®te pour les JO Paris 2024. "
    "Base-toi sur les r√©sultats pr√©c√©dents, le classement mondial, les performances pass√©es aux JO et les favoris actuels. "
    "Fais attention √† ne pas donner de certitudes, mais indique les probabilit√©s r√©alistes ou tendances observ√©es."
)



st.markdown("""
    <style>
    body {
        background-color: #f7f7f7;
    }
    .main {
        padding: 2rem;
        background-color: white;
        border-radius: 15px;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.1);
    }
    h1 {
        font-size: 3em;
        text-align: center;
        color: #0033A0;
        font-family: 'Arial Black', sans-serif;
    }
    .message-user {
        background-color: #E0F2FF;
        padding: 1rem;
        border-radius: 10px;
        margin-bottom: 10px;
        font-weight: 500;
    }
    .message-assistant {
        background-color: #FFF7E0;
        padding: 1rem;
        border-radius: 10px;
        margin-bottom: 10px;
    }
    </style>
""", unsafe_allow_html=True)



st.markdown("<h1>üéâ Chat sur les JO Paris 2024 ü•á</h1>", unsafe_allow_html=True)
st.write("Posez vos questions sur les √©preuves, les athl√®tes ou les r√©sultats des Jeux Olympiques 2024 !")



try:
    client = OpenAI(

    api_key="")
  
    if "openai_model" not in st.session_state:
        st.session_state["openai_model"] = "gpt-4o"

   
    if "messages" not in st.session_state:
        st.session_state.messages = []

    for message in st.session_state.messages:
        css_class = "message-user" if message["role"] == "user" else "message-assistant"
        st.markdown(f'<div class="{css_class}">{message["content"]}</div>', unsafe_allow_html=True)


    if prompt := st.chat_input("Posez votre question"):
       
        messages = st.session_state.messages.copy()

        
        if any(mot in prompt.lower() for mot in ['jo', 'jeux olympiques', 'm√©dailles', 'paris 2024']):
            messages.insert(0, {
                "role": "system",
                "content": f"Contexte sp√©cifique pour les JO 2024 : {JO_PROMPT}\n\nR√©ponds √† la question suivante en utilisant ce contexte si pertinent :"
            })

        elif any(mot in prompt.lower() for mot in ['sportif', 'sportifs', 'athl√®te', 'athl√®tes',  'm√©daill√©s', 'paris JO 2024']):
            messages.insert(0, {
                "role": "system",
                "content": f"Contexte sp√©cifique pour les JO 2024 : {JO_PROMPT2}\n\nR√©ponds √† la question suivante en utilisant ce contexte si pertinent :"
            })
        elif any(mot in prompt.lower() for mot in ['chance', 'pr√©vision', 'pr√©diction', 'favori', 'gagner', 'risque de m√©daille', 'peut-il gagner', 'sera-t-il m√©daill√©']):
            messages.insert(0, {
                "role": "system",
                "content": f"Contexte pr√©dictif JO 2024 : {JO_PROMPT3}\n\nR√©ponds √† la question suivante en te basant sur les probabilit√©s et les performances sportives."
            })
  
        messages.append({"role": "user", "content": prompt})

        st.session_state.messages.append({"role": "user", "content": prompt})
        with st.chat_message("user"):
            st.markdown(prompt)

        with st.chat_message("assistant"):
        
            response_placeholder = st.empty()
            full_response = ""

            try:
                completion = client.chat.completions.create(
                    model=st.session_state["openai_model"],
                    messages=messages,
                    stream=True,  
                )
                for chunk in completion:
                    if chunk.choices[0].delta.content:
                        token = chunk.choices[0].delta.content
                        full_response += token
                        response_placeholder.markdown(full_response)

                st.session_state.messages.append({"role": "assistant", "content": full_response})

            except Exception as e:
                st.error(f"Erreur lors de la g√©n√©ration de la r√©ponse : {e}")


except Exception as e:
    st.error(f"Erreur lors de l'initialisation du client : {e}")



